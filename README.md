# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание и архитектура

### Принцип работы данного приложения: 

* При загрузке стартовой страницы загружается набор карточек товаров так же иконка корзины с счетчиком товаров в ней.  
При и нажатии на любой товар открывается модальное окно в котором можно добавить товар в корзину.

* Далее переходим непосредственно в корзину, она тоже является модальным окном,  в которой отображается список 
добавленных в нее товаров либо пустая корзина и итоговая стоимость товаров. На данном этапе есть функционал: 
удалить товар из корзины, перейти к оформлению.

* При нажатии на кнопку Оформить, открывается модальное окно на котором необходимо выбрать 
способ оплаты и ввести адрес доставки. Пока не будут заполнены все поля, нет возможности нажать “Далее”.
 
* Следующий этап в оформлении заказа, это модальное окно с вводом контактных данных. 
По аналогии с предыдущим этапом необходимо заполнить все поля соблюдая валидацию.

* После внесения данных откроется модальное окно с подтверждением заказа и общей стоимостью. 

### Архитектура проекта

При проектировнии данного проекта был использован MVP-паттерн.

Логика проекта разбита на 3 части:
- Model занимается получением данных через API и их хранением.
- View отвечает за визуальное представление данных и взаимодействие с пользователем.
- EventEmitter, действуя как Presenter, координирует взаимодействие между Model и View, реагируя на события.


### Базовый класс:

#### class Api

handleResponse(response: Response): Promise<object> - обрабатывает ответ сервера.

get(uri: string) - запрашивает данные с сервера.

post(uri: string, data: object, method: ApiPostMethods = 'POST') - отправляет данные на сервер.

#### class EventEmitter

Класс EventEmitter действует как центральный узел для управления событиями, реализуя интерфейс IEvents. Он следует шаблону проектирования "Observer", который позволяет объектам подписываться на определенные события и реагировать на их возникновение. Вот альтернативное описание его методов:

- on - регистрирует обработчик для определенного события.
- off - удаляет обработчик события.
- emit - активирует обработчики для заданного события.
- onAll - позволяет подписаться на множество событий одновременно.
- offAll - отменяет все подписки на события.
- trigger - инициирует событие, позволяя другим классам вызывать события без необходимости зависеть напрямую от EventEmitter.

### Модель данных

В Модель данного проекта входят следующие компоненты, классы и функции, которые распологаются в папках Model:

#### class ProductData

- setPreview(item: IProduct) сохраняет данные о выбранной карточке для дальнейшей работы с ней.


#### class AppAppi

- getProduct(): Promise<IProduct[]> получение массива с карточками с сервера.
- postOrderLot(order: IOrderLot): Promise<IOrderResult> отправляем данные о покупателе на сервер.

#### class BasketData

- getCounter() метод возвращает кол-во товаров в корзине
- getSumTotal () метод возвращает общую стоимость товаров в корзине 
- setSelectProduct(product: IProduct) метод добавляет новый товар в корзину
- getLocalData() метод получения данных из локальной памяти
- deleteProduct(product: IProduct) метод удаляет товар из корзины
- clearBasket() метод очищает корзину
- isProductInBasket(id: string): boolean метод для проверки наличия товара в корзине

#### class FormData

Методы для валидации полей и данных о покупателе
- validateOrder() 
- validateContacts()
Методы для сохранения данных
- setOrderAddress(field: string, value: string)
- setOrderData(field: string, value: string) 
- getOrderLot() метод для получения заполненых данных

### Отображение

К View элементам в данном проекте относятся следующие компоненты которые лежат в папках view:

В каждом классе за вывод данных на экран отвечает метод: 
- render()

#### Product

- setPrice(value: number): string проверка стоимости
- render()

#### ProductPreview

- updateStateButton(data: IProduct, isInBasket: boolean): void
метод для управления состоянием кнопки на Превье карточки
- renderCardPreview({data, isInBasket}: {data: IProduct, isInBasket: boolean}): HTMLElement

#### Basket

- renderPageBasketCounter(value: number): void метод для отрисовки счетчика товаров к корзине
- renderTotalSum(sumTotal: number): void метод для отрисовки общей стоимости товаров к корзине
- render(): HTMLElement;

#### Modal

Клас Modal отвечает за общий блок всех модальных окон
- open(): void; открытие модального окна
- close(): void; закрытие модального окна
- render(): HTMLElement;

#### Form

Данный класс отвечает за отображение форм в модальных окнах для сбора данных о покупателе
- render(): HTMLElement

#### Confirm

Фианльное модальное окно с подтверждением заказа, отображает общую сумму заказа.
- render(total: number)